description: |
  Device represents one individual hardware instance that can be selected based on its attributes.
x-kab-description-zh: |
  Device 表示某个特定的硬件设备实例，该设备可基于其属性被用户选用。
properties:
  allNodes:
    description: |-
      `allNodes` indicates that all nodes have access to the device.

      Must only be set if `spec.perDeviceNodeSelection` is set to true.
      At most one of `nodeName`, `nodeSelector` and `allNodes` can be set.
    x-kab-description-zh: |-
      `allNodes` 表示所有节点都能访问此设备。

      只有当 `spec.perDeviceNodeSelection` 被设置为 `true` 的时候才能使用。
      `nodeName`、`nodeSelector` 和 `allNodes` 三者只能设置其一。
    type: boolean

  allowMultipleAllocations:
    description: |
      This marks whether the device is allowed to be allocated to multiple DeviceRequests.
      If `allowMultipleAllocations` is set to true, the device can be allocated more than once,
      and all of its capacity is consumable, regardless of whether the `requestPolicy` is defined or not.
    x-kab-description-zh: |
      此字段标记设备是否可以分配给多个 DeviceRequest。
      如果 `allowMultipleAllocations` 被设置为 true，设备可以被多次分配；
      其全部容量都是可利用的，无论是否定义了 `requestPolicy`。
    type: boolean

  attributes:
    additionalProperties:
      $ref: '#/definitions/io.k8s.api.resource.v1beta2.DeviceAttribute'
    description: |-
      `attributes` defines the set of attributes for this device.
      The name of each attribute must be unique in that set.

      The maximum number of `attributes` and `capacities` combined is 32.
    x-kab-description-zh: |-
      `attributes` 定义设备的属性集合。
      每个属性的名字在此集合中必须唯一。

      `attributes` 和 `capacity` 两个字段的总条目数不能超过 32 个。
    type: object

  bindingConditions:
    description: |
      This defines the conditions for proceeding with binding.
      All of these conditions must be set in the per-device status conditions with a value of True
      to proceed with binding the Pod to the node while scheduling the Pod.

      The maximum number of binding conditions is 4.

      The conditions must be a valid condition type string.

      This is an Alpha field and requires enabling the `DRADeviceBindingConditions` and 
      `DRAResourceClaimDeviceStatus` feature gates.
    x-kab-description-zh: |
      此字段定义要继续将 Pod 绑定到某节点时需要满足的条件状况。
      在调度 Pod 时，需要将 Pod 绑定到节点。
      此字段中列举的条件必须在对应设备的状态状况中都被设置，并且取值都为 True，才允许继续执行绑定动作。

      所列举的字符串都是状况的类型（type），因此要符合状况类型约束。

      此字段为 Alpha 阶段，需要启用 `DRADeviceBindingConditions` 和 `DRAResourceClaimDeviceStatus` 特性门控。

    items:
      minLength: 1
      type: string
    maxItems: 4
    type: array
    x-kubernetes-list-type: atomic

  bindingFailureConditions:
    description: |
      This defines the conditions for binding failure.
      They may be set in the per-device status conditions.  If any is true, a binding failure occurred.

      The maximum number of binding failure conditions is 4.

      The conditions must be a valid condition type string.

      This is an Alpha field and requires enabling the `DRADeviceBindingConditions`
      and `DRAResourceClaimDeviceStatus` feature gates.
    x-kab-description-zh: |
      此字段定义的是绑定操作失败的状况。
      所列举的状况类型可以在各个设备的状态状况中设置。如果其中任何一个状况类型为 True，则绑定视为失败。

      所列举的字符串都是状况的类型（type），因此要符合状况类型约束。

      此字段为 Alpha 阶段，需要启用 `DRADeviceBindingConditions` 和 `DRAResourceClaimDeviceStatus` 特性门控。

    items:
      minLength: 1
      type: string
    maxItems: 4
    type: array
    x-kubernetes-list-type: atomic
  bindsToNode:
    description: |
      This indicates if the usage of an allocation involving this device has to be limited to
      exactly the node that was chosen when allocating the claim.
      If set to true, the scheduler will set the `ResourceClaim.status.allocation.nodeSelector`
      to match the node where the allocation was made.

      This is an Alpha field and requires enabling the `DRADeviceBindingConditions` and
      `DRAResourceClaimDeviceStatus` feature gates.
    x-kab-description-zh: |
      此字段用来表明是否与此设备相关的设备分配只能在分配申领时选定的节点上使用。
      如果字段值为 True，则调度器会设置 ResourceClaim 的 `status.allocation.nodeSelector` 字段，
      使之匹配设备分配时选定的节点。

      此字段为 Alpha 阶段，需要启用 `DRADeviceBindingConditions` 和 `DRAResourceClaimDeviceStatus` 特性门控。

    type: boolean

  capacity:
    additionalProperties:
      $ref: '#/definitions/io.k8s.api.resource.v1beta2.DeviceCapacity'
    description: |-
      `capacity` defines the set of capacities for this device.
      The name of each capacity must be unique in that set.

      The maximum number of attributes and capacities combined is 32.
    x-kab-description-zh: |-
      `capacity` 定义设备的容量信息集合。
      每个容量属性的名字在此集合中必须唯一。

      `attributes` 和 `capacity` 两个字段的总条目数不能超过 32 个。
    type: object
  consumesCounters:
    description: |-
      `consumesCounters` defines a list of references to `sharedCounters` and
      the set of counters that the device will consume from those counter sets.

      There can only be a single entry per counterSet.

      The total number of device counter consumption entries must be <= 32.
      In addition, the total number in the entire ResourceSlice must be <= 1024
      (for example, 64 devices with 16 counters each).
    x-kab-description-zh: |-
      `consumesCounters` 定义一个列表，其中包含对 `sharedCounters` 的引用，
      所给出的是供设备消耗的计数器集合。

      每个 `counterSet` 中只能有一个元素。

      设备计数器消耗条目的总数不能超过 32。
      此外，ResourceSlice 中各个条目的总的计数器个数不能超过 1024。
      （例如，允许存在 64 个设备，每个设备带有 16 个计数器。）
    items:
      $ref: '#/definitions/io.k8s.api.resource.v1beta2.DeviceCounterConsumption'
    maxItems: 32
    type: array
    x-kubernetes-list-type: atomic
  name:
    description: |-
      `name` is unique identifier among all devices managed by the driver in the pool. It must be a DNS label.
    x-kab-description-zh: |
      `name` 是一个标识符，在设备池中由驱动所管理的所有设备中唯一。字段值必须是一个合法的 DNS 标签值。
    minLength: 1
    type: string
  nodeName:
    description: |-
      `nodeName` identifies the node where the device is available.

      Must only be set if `spec.perDeviceNodeSelection` is set to true.
      At most one of `nodeName`, `nodeSelector` and `allNodes` can be set.
    x-kab-description-zh: |-
      `nodeName` 给出能访问此设备的节点。

      只有在 `spec.`perDeviceNodeSelection` 被设置为 `true` 时才能设置。
      `nodeName`、`nodeSelector` 和 `allNodes` 中只能设置其一。
    minLength: 1
    type: string
  nodeSelector:
    $ref: '#/definitions/io.k8s.api.core.v1.NodeSelector'
    description: |-
      `nodeSelector` defines the nodes where the device is available.
      Must use exactly one term.

      Must only be set if `spec.perDeviceNodeSelection` is set to true.
      At most one of `nodeName`, `nodeSelector` and `allNodes` can be set.
    x-kab-description-zh: |
      `nodeSelector` 用来定义能够访问此设备的节点。

      只有在 `spec.`perDeviceNodeSelection` 被设置为 `true` 时才能设置。
      `nodeName`、`nodeSelector` 和 `allNodes` 中只能设置其一。
  taints:
    description: |
      If specified, these are the driver-defined taints.

      This is an Alpha field and requires enabling the `DRADeviceTaints` feature gate.
    x-kab-description-zh: |
      设置字段用来给出驱动定义的设备污点。

      此字段为 Alpha 级别，需要启用 `DRADeviceTaints` 特性门控。
    items:
      $ref: '#/definitions/io.k8s.api.resource.v1beta2.DeviceTaint'
    maxItems: 4
    type: array
    x-kubernetes-list-type: atomic
required:
  - name
type: object

