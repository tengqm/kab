{% load static %}
<div class="d-flex mx-0 my-2 p-0" style="height:45px;">
  <span style="line-height:40px;">
    Page: {{ OBJECTS.number }} / {{ OBJECTS.paginator.num_pages }} &nbsp;
  </span>
  <form id='search_form' method="get" class="form-inline" action="{{ RESOURCE_URL }}">
    <ul class="pagination">
      <li class="page-item{% if not OBJECTS.has_previous %} disabled{% endif %}">
        <a class="page-link" href="#" onclick="_search('first')"><i class="fa fa-step-backward"></i></a>
      </li>
      <li class="page-item{% if not OBJECTS.has_previous %} disabled{% endif %}">
        <a class="page-link" href="#" onclick="_search('previous')"><i class="fa fa-chevron-left"></i></a>
      </li>
      <li class="page-item{% if not OBJECTS.has_next %} disabled{% endif %}">
        <a class="page-link" href="#" onclick="_search('next')"><i class="fa fa-chevron-right"></i></a>
      </li>
      <li class="page-item{% if not OBJECTS.has_next %} disabled{% endif %}">
        <a class="page-link" href="#" onclick="_search('last')"><i class="fa fa-step-forward"></i></a></li>
      <li>&nbsp;</li>
      <li>
        <select id="page_size" name="page_size" style="height:37px;" onchange="_search('page_size')">
          <option value='5' {% if PAGE_SIZE == '5' %}selected{% endif %}>5</option>
          <option value='10' {% if PAGE_SIZE == '10' %}selected{% endif %}>10</option>
          <option value='15' {% if PAGE_SIZE == '15' %}selected{% endif %}>15</option>
          <option value='20' {% if PAGE_SIZE == '20' %}selected{% endif %}>20</option>
          <option value='50' {% if PAGE_SIZE == '50' %}selected{% endif %}>50</option>
        </select>
      </li>
      <li>
        &nbsp;&nbsp;&nbsp;
      </li>
      <li>
        <input type="hidden" id='page' name='page'>
        <input type="text" class="form-control" style="width:280px;height:34px;" id='q_string' name='q' value="{{ Q_STRING }}">
        <button id='id_query' type="submit" class="btn btn-secondary btn-sm shadow-sm"><i class="fa fa-search"></i> Search</button>
      </li>
    </ul>
  </form>
</div>

{% block javascript %}
<script src="{% static 'js/jquery.tablesorter.js' %}"></script>
<script>
function _search(type) {
  var previous_page = 1;
  var next_page = 1;
  var total_page = {{ OBJECTS.paginator.num_pages }};
  {% if OBJECTS.has_previous %}
    previous_page = {{ OBJECTS.previous_page_number }};
  {% endif %}
  {% if OBJECTS.has_next %}
    next_page = {{ OBJECTS.next_page_number }};
  {% endif %}

  if (type == 'first' || type == 'page_size') {
    $("#page").val(1);
  } else if (type == 'previous') {
    $("#page").val(previous_page);
  } else if (type == 'next') {
    $("#page").val(next_page);
  } else if (type == 'last') {
    $("#page").val(total_page);
  }
  $("#search_form").submit();
};

$(document).ready(function() {
  $("#table").tablesorter({
    theme: "blue",
  });
});
</script>
{% endblock %}
